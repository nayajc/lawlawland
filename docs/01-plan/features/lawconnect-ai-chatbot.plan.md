# Plan: LawConnect AI Chatbot

> AI 기반 이혼 법률 정보 제공 상담 챗봇

## 1. Feature Overview

### 1.1 목적
이혼 관련 법률 정보를 AI 챗봇을 통해 친근하고 접근하기 쉬운 방식으로 제공하여, 법률 지식이 없는 일반인도 자신의 상황에 맞는 기본 법률 정보를 얻을 수 있도록 한다.

### 1.2 핵심 가치
- **접근성**: 법률 용어를 쉽게 풀어서 설명
- **신뢰성**: 대한민국 민법/가사소송법 기반 정확한 정보
- **편의성**: 대화형 인터페이스로 맞춤 정보 제공
- **연결성**: 필요시 프리미엄 전문 상담으로 원활한 전환

## 2. Target Users

| 사용자 유형 | 설명 | 니즈 |
|------------|------|------|
| 이혼 고려자 | 이혼을 고민 중인 일반인 | 절차, 비용, 기간 정보 |
| 이혼 진행자 | 이혼 과정 중인 당사자 | 재산분할, 양육권 관련 구체적 정보 |
| 정보 탐색자 | 주변인/지인을 위해 정보 수집 | 전반적인 이혼 법률 개요 |

## 3. Core Features

### 3.1 AI 법률 상담 챗봇
대화형 인터페이스를 통한 이혼 법률 정보 제공

| 상담 카테고리 | 세부 항목 |
|--------------|----------|
| **이혼 사유** | 성격 차이, 외도/부정행위, 가정폭력, 경제적 문제, 시댁/처가 갈등, 성적 불일치 |
| **재산분할** | 분할 비율, 특유재산/공동재산 구분, 퇴직금/연금 분할, 부채 처리 |
| **위자료** | 산정 기준, 청구 가능 사유, 일반적 금액 범위, 청구 시효 |
| **양육권/면접교섭권** | 양육자 지정 기준, 면접교섭 방법/횟수, 양육비 산정 |
| **친권자 지정** | 친권 vs 양육권 차이, 지정 기준, 변경 절차 |
| **이혼 후 성 변경** | 자녀 성 변경 요건, 절차, 소요 기간 |
| **이혼 절차** | 협의이혼 vs 재판이혼, 필요서류, 절차별 소요기간 |

### 3.2 비용 계산기
사용자 입력 기반 예상 비용 산출

| 계산기 종류 | 입력값 | 산출값 |
|------------|--------|--------|
| **위자료 계산기** | 혼인기간, 이혼 사유, 과실 정도, 재산 상태 | 예상 위자료 범위 |
| **재산분할 계산기** | 총 재산, 기여도, 혼인기간, 특유재산 | 예상 분할 비율/금액 |
| **양육비 계산기** | 부/모 소득, 자녀 수, 자녀 연령 | 월 양육비 예상 금액 (양육비 산정 기준표 기반) |

### 3.3 변호사 상담 연결 (연락처 수집 + 이메일 발송)
사용자가 전문 상담을 원할 때 연락처를 수집하고, AI가 상담 내용을 자동 요약하여 변호사에게 이메일로 전달

**상담 연결 플로우:**
```
AI 상담 중 "전문가 상담 원하시나요?" 제안
    ↓
사용자 동의 시 → 연락처 입력 폼
    (이름, 전화번호, 이메일, 선호 연락 시간)
    ↓
AI가 상담 내용 자동 요약 생성
    (상담 카테고리, 핵심 쟁점, 사용자 상황 요약)
    ↓
변호사에게 이메일 발송
    (사용자 연락처 + 상담 요약 + 원본 대화 링크)
    ↓
사용자에게 "상담 요청 완료" 확인 + 예상 회신 안내
```

**수집 정보:**
| 필드 | 필수 여부 | 용도 |
|------|----------|------|
| 이름 | 필수 | 변호사 회신 시 호칭 |
| 전화번호 | 필수 | 변호사 직접 연락 |
| 이메일 | 선택 | 상담 요약 사본 발송 |
| 선호 연락 시간 | 선택 | 변호사 연락 편의 |
| 개인정보 동의 | 필수 | 법적 요건 |

**이메일 발송:**
- Resend API를 활용한 이메일 발송
- 변호사에게: 사용자 연락처 + AI 상담 요약 + 상담 카테고리
- 사용자에게: 상담 요청 확인 이메일 (선택)

## 4. Technical Architecture

### 4.1 Tech Stack

| 영역 | 기술 | 선정 이유 |
|------|------|----------|
| **Frontend** | Next.js 15 (App Router) | SSR/SSG, 빠른 페이지 로드, SEO |
| **UI Framework** | Tailwind CSS + shadcn/ui | 세련된 디자인 시스템, 커스터마이징 용이 |
| **AI Engine** | Claude API (primary) + GPT-4 API (fallback) | 한국어 이해도, 법률 문맥 파악 능력 |
| **State Management** | Zustand | 가벼운 상태 관리, 채팅 이력 관리 |
| **Backend/DB** | Supabase | PostgreSQL DB, Auth, RLS, Edge Functions |
| **Email** | Resend | 변호사 상담 요청 이메일 발송 |
| **Animation** | Framer Motion | 부드러운 UI 전환, 챗봇 인터랙션 |
| **Deployment** | Vercel | Next.js 최적화 배포 |

### 4.2 AI 구현 전략

```
사용자 입력
    ↓
[입력 분류기] → 카테고리 판별 (이혼사유/재산분할/양육권 등)
    ↓
[프롬프트 엔지니어링] → 카테고리별 System Prompt + 법률 컨텍스트 주입
    ↓
[Claude API / GPT-4 API] → AI 응답 생성
    ↓
[응답 후처리] → 면책 조항 추가, 프리미엄 상담 추천 판단
    ↓
사용자에게 응답
```

### 4.3 Supabase 데이터 모델

```
[conversations]          # 상담 세션
├── id (uuid, PK)
├── session_id (text)    # 익명 세션 식별
├── category (text)      # 상담 카테고리
├── messages (jsonb)     # 대화 내역
├── summary (text)       # AI 자동 요약
├── created_at (timestamptz)
└── updated_at (timestamptz)

[consultation_requests]  # 변호사 상담 요청
├── id (uuid, PK)
├── conversation_id (uuid, FK)
├── name (text)
├── phone (text)
├── email (text, nullable)
├── preferred_time (text, nullable)
├── privacy_agreed (boolean)
├── summary (text)       # AI 요약
├── status (text)        # pending / sent / contacted
├── email_sent_at (timestamptz)
└── created_at (timestamptz)

[lawyers]                # 변호사 정보 (관리자용)
├── id (uuid, PK)
├── name (text)
├── email (text)
├── specialty (text[])
└── is_active (boolean)
```

### 4.4 이메일 발송 구조

```
상담 요청 접수
    ↓
Supabase Edge Function (or Next.js API Route)
    ↓
Resend API → 변호사 이메일
    ├── 제목: "[LawConnect] 새 상담 요청 - {카테고리}"
    ├── 본문: 사용자 연락처 + 상담 요약
    └── 원본 대화 링크 (관리자 페이지)
    ↓
(선택) Resend API → 사용자 이메일
    └── "상담 요청이 접수되었습니다" 확인 메일
```

### 4.5 법률 데이터 관리
- **RAG (Retrieval Augmented Generation)** 방식 적용
- 법률 조문, 판례 요약, FAQ를 벡터 DB에 저장 (Supabase pgvector)
- 사용자 질문에 관련 법률 컨텍스트 자동 검색 후 AI에 주입

## 5. Design Direction

### 5.1 디자인 컨셉: "따뜻한 전문성"

| 요소 | 방향 |
|------|------|
| **톤앤매너** | 따뜻하고 공감적, 그러나 전문적 신뢰감 |
| **컬러 팔레트** | Primary: Warm Indigo (#4F46E5) / Accent: Soft Amber (#F59E0B) / Background: Warm Gray (#F9FAFB) |
| **타이포그래피** | Pretendard (본문) + Noto Serif KR (강조/법률 인용) |
| **아이콘** | Lucide Icons (라인 스타일, 부드러운 느낌) |
| **레이아웃** | 카드 기반, 넉넉한 여백, 라운드 코너 |

### 5.2 UI 추천 스타일

**Option A: 모던 미니멀 (추천)**
- 깔끔한 화이트 배경 + 포인트 컬러
- 카카오톡/라인 스타일의 친근한 채팅 UI
- 부드러운 그라데이션과 글래스모피즘 효과
- 플로팅 챗봇 위젯 + 전체 화면 전환 지원

**Option B: 워밍 프로페셔널**
- 크림/베이지 톤 배경으로 따뜻한 느낌
- 법률 사무소 느낌의 세련된 레이아웃
- 사이드바 네비게이션 + 메인 챗 영역
- 카테고리별 아이콘 네비게이션

**Option C: 대시보드형**
- 좌측 상담 카테고리 패널 + 우측 채팅
- 비용 계산기를 별도 탭으로 구성
- 상담 이력/북마크 관리 패널

### 5.3 핵심 페이지 구성

```
/ (홈)
├── /chat                    # AI 상담 챗봇 메인
│   ├── /chat/divorce-reason  # 이혼 사유 상담
│   ├── /chat/property        # 재산분할 상담
│   ├── /chat/alimony         # 위자료 상담
│   ├── /chat/custody         # 양육권 상담
│   └── /chat/general         # 일반 상담
├── /calculator              # 비용 계산기
│   ├── /calculator/alimony   # 위자료 계산기
│   ├── /calculator/property  # 재산분할 계산기
│   └── /calculator/child     # 양육비 계산기
├── /guide                   # 이혼 가이드 (정보 콘텐츠)
├── /consult                 # 변호사 상담 요청 (연락처 입력 + 요약 확인)
├── /consult/complete        # 상담 요청 완료 확인
└── /mypage                  # 상담 이력/설정
```

## 6. Key Constraints

### 6.1 법적 면책
- **모든 AI 응답에 면책 조항 필수**: "본 정보는 일반적인 법률 정보이며, 법률 조언이 아닙니다"
- AI가 구체적 법률 조언을 하지 않도록 프롬프트 가드레일 설정
- 사안이 복잡한 경우 전문가 상담 권고 자동 삽입

### 6.2 데이터 보호
- 상담 내용 암호화 저장
- 개인정보 최소 수집 원칙
- 개인정보처리방침 필수 게시

### 6.3 AI 안전성
- Hallucination 방지: RAG 기반 사실 검증
- 유해 콘텐츠 필터링 (폭력, 자해 관련 감지 시 긴급 연락처 안내)
- 응답 품질 모니터링 로그

## 7. MVP Scope (Phase 1)

### 포함
- [x] AI 챗봇 기본 대화 (이혼 사유, 절차 안내)
- [x] 양육비 계산기 (양육비 산정 기준표 기반)
- [x] 변호사 상담 연결 (연락처 수집 + 상담 요약 이메일 발송)
- [x] 반응형 웹 (모바일 최적화)
- [x] 면책 조항 자동 삽입
- [x] Supabase 기반 상담 이력 저장

### 미포함 (Phase 2+)
- [ ] 위자료/재산분할 계산기
- [ ] RAG 기반 판례 검색 (Supabase pgvector)
- [ ] 사용자 계정/로그인 시스템
- [ ] 상담 내용 PDF 다운로드
- [ ] 관리자 대시보드 (상담 요청 관리)

## 8. Success Metrics

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| AI 응답 정확도 | > 90% | 법률 전문가 샘플링 검증 |
| 사용자 만족도 | > 4.0/5.0 | 상담 후 평가 |
| 평균 세션 시간 | > 3분 | Analytics |
| 프리미엄 전환율 | > 5% | 상담 연결 수 / 총 사용자 |
| 월간 활성 사용자 | > 1,000 (런칭 3개월) | MAU |

## 9. Risks & Mitigations

| 리스크 | 영향 | 완화 방안 |
|--------|------|----------|
| AI 부정확 법률 정보 제공 | 높음 | RAG + 면책조항 + 정기 검증 |
| 개인정보 유출 | 높음 | 암호화 + 최소 수집 + 보안 감사 |
| 법률 자문 오인 | 중간 | 면책조항 강화 + UX 상 명확한 안내 |
| AI API 비용 과다 | 중간 | 응답 캐싱 + 토큰 최적화 + 단계별 API 선택 |

---

**Created**: 2026-02-12
**Feature**: lawconnect-ai-chatbot
**Phase**: Plan
**Level**: Dynamic
